{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\frank-smith\\\\Desktop\\\\PROYECTOS PF\\\\PROYECTO-VIDEOGAMES\\\\Henry-Project\\\\henryproject\\\\client\\\\src\\\\Components\\\\SendNews\\\\SendNews.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useEffect } from 'react';\nimport './SendNews.css';\nimport { getAllMailsNews } from '../../redux/Actions/Index';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SendNews = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const mailsNews = useSelector(state => state.mailsNews);\n  const [mails, setMails] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    dispatch(getAllMailsNews());\n  }, [dispatch]);\n  useEffect(() => {\n    let mailing = document.getElementById('divToAppendMails');\n    let sending = mails.join([', ']);\n    mailing.innerHTML = `${sending}`;\n  }, [mails]);\n\n  function onChangeEmail(ev) {\n    ev.preventDefault();\n\n    if (!(mails !== null && mails !== void 0 && mails.includes(ev.target.value)) && ev.target.value !== \"All\") {\n      setMails([...mails, ev.target.value]);\n    }\n  }\n\n  function handleSubmit(ev) {\n    ev.preventDefault();\n    setLoading(true);\n    axios.post('/sendNewsletter', {\n      mails: mails,\n      emailHtml: input\n    }).then(resp => resp.data).then(resp => {\n      setLoading(false);\n      console.log(resp);\n    }).catch(err => {\n      console.log(err);\n      setLoading(false);\n    });\n  }\n\n  function handleChange(e) {\n    setInput(e.target.value);\n    console.log(input);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"firstDivFormSendNews\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"titleSendNewOffer\",\n      children: \"Send your newsletter:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: ev => handleSubmit(ev),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"divFormSendNews\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"Write and email\",\n          rows: \"10\",\n          cols: \"70\",\n          onChange: e => handleChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Emails:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"mails\",\n          onChange: ev => onChangeEmail(ev),\n          className: \"buttonSendNewsForm\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"All\",\n            children: \"select user:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 7\n          }, this), mailsNews.map(ev => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: ev.mail,\n              children: [\" \", ev.mail, \" \"]\n            }, ev.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"divMailsAdded\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"You'll send newsletter to:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"divToAppendMails\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 7\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: true,\n          type: \"submit\",\n          className: \"buttonSendNewsForm\",\n          children: \" Loading \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"buttonSendNewsForm\",\n          children: \"Send Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SendNews, \"5HNW4QFQkMvNbX2V5Wx78Jom8Cw=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = SendNews;\nexport default SendNews;\n\nvar _c;\n\n$RefreshReg$(_c, \"SendNews\");","map":{"version":3,"names":["React","useDispatch","useSelector","useEffect","getAllMailsNews","useState","axios","SendNews","dispatch","mailsNews","state","mails","setMails","input","setInput","loading","setLoading","mailing","document","getElementById","sending","join","innerHTML","onChangeEmail","ev","preventDefault","includes","target","value","handleSubmit","post","emailHtml","then","resp","data","console","log","catch","err","handleChange","e","map","mail","id"],"sources":["C:/Users/frank-smith/Desktop/PROYECTOS PF/PROYECTO-VIDEOGAMES/Henry-Project/henryproject/client/src/Components/SendNews/SendNews.jsx"],"sourcesContent":["import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useEffect } from 'react'\r\nimport './SendNews.css'\r\nimport { getAllMailsNews } from '../../redux/Actions/Index'\r\nimport { useState } from 'react'\r\nimport axios from 'axios'\r\n\r\n\r\nconst SendNews = () => {\r\n const dispatch= useDispatch()\r\n const mailsNews= useSelector(state=>state.mailsNews)\r\n const [mails, setMails] = useState([])\r\n const [input, setInput] = useState('')\r\n const [loading, setLoading] = useState(false)\r\n\r\nuseEffect(() => {\r\n   dispatch(getAllMailsNews());\r\n}, [dispatch])\r\n\r\nuseEffect(() => {\r\n     let mailing = document.getElementById('divToAppendMails')\r\n     let sending = mails.join([', '])\r\n     mailing.innerHTML=`${sending}`\r\n}, [mails])\r\n\r\nfunction onChangeEmail(ev){\r\n  ev.preventDefault()\r\n  if(!mails?.includes(ev.target.value) && ev.target.value !== \"All\") {\r\n    setMails([...mails, ev.target.value])\r\n  }\r\n\r\n}\r\n\r\n\r\nfunction handleSubmit(ev) {\r\n  ev.preventDefault()\r\n  setLoading(true)\r\n  axios.post('/sendNewsletter', {mails:mails, emailHtml:input} ).then(resp => resp.data)\r\n  .then(resp => {\r\n    setLoading(false)\r\n    console.log(resp)\r\n  })\r\n  .catch(err => {\r\n    console.log(err)\r\n    setLoading(false)\r\n  })\r\n}\r\n\r\nfunction handleChange(e) {\r\n  setInput(e.target.value)\r\n  console.log(input)\r\n}\r\n\r\n\r\n  return (\r\n    <div className='firstDivFormSendNews'>\r\n    <h3 className='titleSendNewOffer'>Send your newsletter:</h3>\r\n    <form onSubmit={(ev) => handleSubmit(ev)}> \r\n      <div className='divFormSendNews'>\r\n      <textarea placeholder=\"Write and email\" rows=\"10\" cols=\"70\" onChange={e => handleChange(e)}></textarea>\r\n      <label>Emails:</label>\r\n      <select name=\"mails\" onChange={(ev)=>onChangeEmail(ev)} className='buttonSendNewsForm'>\r\n      <option value=\"All\">select user:</option>\r\n      {mailsNews.map(ev=>{\r\n            return(\r\n                <option value={ev.mail} key={ev.id} > {ev.mail} </option>\r\n            )\r\n        })}\r\n      </select>\r\n      <div className='divMailsAdded'>\r\n        <h4>You'll send newsletter to:</h4>\r\n        <div id='divToAppendMails'>\r\n\r\n        </div>\r\n      </div>\r\n      {\r\n        loading ?\r\n        <button disabled={true} type='submit' className='buttonSendNewsForm'> Loading </button>\r\n        :\r\n        <button type='submit' className='buttonSendNewsForm' >Send Email</button>\r\n      }\r\n      </div>\r\n    </form>\r\n    {/* <img src={}></img> */}\r\n\r\n    </div>\r\n\r\n  )\r\n\r\n      }\r\n\r\n\r\nexport default SendNews"],"mappings":"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"},"metadata":{},"sourceType":"module"}